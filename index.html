<!DOCTYPE html>
<html>
  <head>
    <title>VR Arcade - Room & Controllers</title>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
  </head>
  <body>
    <a-scene>
      <a-assets>
        </a-assets>

      <a-sky color="#333344"></a-sky>
      <a-plane
        position="0 0 -4"
        rotation="-90 0 0"
        width="20"
        height="20"
        color="#222222"
        shadow="receive: true"
      ></a-plane>

      <a-box
        position="0 2 0"
        width="2"
        height="4"
        depth="0.5"
        color="#775555"
        shadow="cast: true"
      ></a-box>

      <a-entity id="rig" position="0 0 0">
        <a-camera position="0 1.6 0" look-controls></a-camera>

        <a-entity
          id="left-hand"
          laser-controls="hand: left"
          raycaster="objects: [clickable]; far: 20"
          line="color: blue; opacity: 0.8"
        ></a-entity>

        <a-entity
          id="right-hand"
          laser-controls="hand: right"
          raycaster="objects: [clickable]; far: 20"
          line="color: red; opacity: 0.8"
        ></a-entity>
      </a-entity>

      <script>
        AFRAME.registerComponent('clickable', {
          init: function () {
            // This component just serves as a marker for the raycaster.
            // When we add interactive elements, we'll attach this component
            // to them and add event listeners here or elsewhere.
            console.log("Clickable component initialized for:", this.el.id || this.el.tagName);
            this.el.addEventListener('click', function(evt) {
              console.log('Clicked!', evt.target.id || evt.target.tagName);
              // You can add visual feedback here later, e.g., changing color
              // evt.target.setAttribute('material', 'color', 'green');
            });
          }
        });

        // Attach 'clickable' component to the arcade cabinet for initial testing
        document.querySelector('a-box[color="#775555"]').setAttribute('clickable', '');
      </script>
    </a-scene>
  </body>
</html>
