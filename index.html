<!-- arcade-room.html: Color Pad Prototype for Quest VR -->
<html>
  <head>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
  </head>
  <body>
    <a-scene background="color: #333">

      <!-- Room (big cube) -->
      <a-box position="0 5 0" width="15" height="10" depth="15" color="#222" side="double" material="opacity:0.9"></a-box>

      <!-- Arcade Cabinet (rectangle) -->
      <a-box id="arcade" position="0 2 -4" width="2" height="4" depth="0.5" color="#555"></a-box>

      <!-- Color Tiles (attached to arcade) -->
      <a-box class="color-tile" color="#e74c3c" position="-0.7 3.2 -3.7" width="0.6" height="0.6" depth="0.1"></a-box>
      <a-box class="color-tile" color="#3498db" position="0 3.2 -3.7" width="0.6" height="0.6" depth="0.1"></a-box>
      <a-box class="color-tile" color="#2ecc71" position="0.7 3.2 -3.7" width="0.6" height="0.6" depth="0.1"></a-box>
      <a-box class="color-tile" color="#f1c40f" position="-0.7 2.5 -3.7" width="0.6" height="0.6" depth="0.1"></a-box>
      <a-box class="color-tile" color="#9b59b6" position="0 2.5 -3.7" width="0.6" height="0.6" depth="0.1"></a-box>
      <a-box class="color-tile" color="#ffffff" position="0.7 2.5 -3.7" width="0.6" height="0.6" depth="0.1"></a-box>

      <!-- VR Rig: movement + both controllers + camera -->
<a-entity id="rig" movement-controls position="0 1.6 8">
  <!-- Main camera -->
  <a-entity camera look-controls wasd-controls="enabled: false"></a-entity>

  <!-- Right hand: laser pointer -->
  <a-entity laser-controls="hand: right"></a-entity>
  
  <!-- Left hand: laser pointer -->
  <a-entity laser-controls="hand: left"></a-entity>
</a-entity>


      <!-- JS: color change on tile click -->
      <script>
        AFRAME.registerComponent('color-changer', {
          init: function () {
            this.el.addEventListener('click', function () {
              // Get the clicked color
              var color = this.getAttribute('color');
              // Set the room's color
              document.querySelector('a-box').setAttribute('color', color);
            });
          }
        });

        // Attach color-changer to all color tiles after DOM loads
        window.addEventListener('DOMContentLoaded', function () {
          document.querySelectorAll('.color-tile').forEach(tile => {
            tile.setAttribute('color-changer', '');
          });
        });
      </script>
    </a-scene>
  </body>
</html>
