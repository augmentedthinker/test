<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VR Cube Room</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/aframe/1.4.0/aframe.min.js"></script>
    <style>
        body {
            margin: 0;
            font-family: 'Courier New', monospace;
        }
        
        .ui-overlay {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
            background: rgba(0, 0, 0, 0.8);
            color: #00ff00;
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #00ff00;
            font-size: 14px;
        }
        
        .enter-vr-button {
            background: #00ff00 !important;
            color: black !important;
            font-family: 'Courier New', monospace !important;
            font-weight: bold !important;
            border: 2px solid #00ff00 !important;
            border-radius: 5px !important;
        }
    </style>
</head>
<body>
    <div class="ui-overlay">
        <div><strong>VR Cube Room</strong></div>
        <div>Look around â€¢ Click objects</div>
        <div>WASD + Mouse (Desktop)</div>
        <div>VR: Use controllers</div>
    </div>

    <a-scene 
        background="color: #001122"
        vr-mode-ui="enabled: true"
        cursor="rayOrigin: mouse"
        raycaster="objects: .interactive">
        
        <!-- Assets -->
        <a-assets>
            <a-mixin id="interactive-wall" 
                     geometry="primitive: plane; width: 10; height: 10" 
                     material="color: #1a1a2e; metalness: 0.2; roughness: 0.8"
                     class="interactive">
            </a-mixin>
            
            <a-mixin id="neon-glow"
                     material="color: #00ff00; emissive: #004400; emissiveIntensity: 0.3">
            </a-mixin>
        </a-assets>

        <!-- Lighting -->
        <a-light type="ambient" color="#0f0f2f" intensity="0.4"></a-light>
        <a-light type="point" position="0 8 0" color="#00ffff" intensity="0.8" distance="20"></a-light>
        <a-light type="point" position="5 3 5" color="#ff00ff" intensity="0.6" distance="15"></a-light>
        <a-light type="point" position="-5 3 -5" color="#ffff00" intensity="0.6" distance="15"></a-light>

        <!-- Room Walls -->
        <!-- Front Wall (where Tetris will go) -->
        <a-plane 
            id="front-wall"
            mixin="interactive-wall"
            position="0 5 -5"
            rotation="0 0 0"
            material="color: #2a2a4e"
            sound="src: url(data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmAZAjiEy+nWjT4LIIzS9t2QQAoUXrTp66hVFApGn+DyvmAZAjiEy+nWjT4LMnvMrIVLGjRTp+jBrGQaAziMx+fSkCQJHGrM5+DwXEIJJXbH8N2QQAoUXrTp66hVFAo=); on: click; autoplay: false"
            animation__hover="property: material.emissiveIntensity; to: 0.2; startEvents: mouseenter; dur: 200"
            animation__unhover="property: material.emissiveIntensity; to: 0; startEvents: mouseleave; dur: 200"
            text="value: TETRIS ARCADE\nReady For Integration; align: center; color: #00ff00; position: 0 2 0.01; font: dejavu">
        </a-plane>

        <!-- Back Wall -->
        <a-plane 
            id="back-wall"
            mixin="interactive-wall"
            position="0 5 5"
            rotation="0 180 0"
            animation__click="property: material.color; to: #ff6b6b; startEvents: click; dur: 500; direction: alternate"
            text="value: BACK WALL\nClick Me!; align: center; color: #ff6b6b; position: 0 0 0.01; font: dejavu">
        </a-plane>

        <!-- Left Wall -->
        <a-plane 
            id="left-wall"
            mixin="interactive-wall"
            position="-5 5 0"
            rotation="0 90 0"
            animation__click="property: material.color; to: #4ecdc4; startEvents: click; dur: 500; direction: alternate"
            text="value: LEFT WALL\nInteractive; align: center; color: #4ecdc4; position: 0 0 0.01; font: dejavu">
        </a-plane>

        <!-- Right Wall -->
        <a-plane 
            id="right-wall"
            mixin="interactive-wall"
            position="5 5 0"
            rotation="0 -90 0"
            animation__click="property: material.color; to: #ffe66d; startEvents: click; dur: 500; direction: alternate"
            text="value: RIGHT WALL\nClickable; align: center; color: #ffe66d; position: 0 0 0.01; font: dejavu">
        </a-plane>

        <!-- Ceiling -->
        <a-plane 
            id="ceiling"
            geometry="primitive: plane; width: 10; height: 10"
            position="0 10 0"
            rotation="90 0 0"
            material="color: #0f0f2f; metalness: 0.8; roughness: 0.2"
            class="interactive"
            animation__click="property: material.color; to: #6b5b95; startEvents: click; dur: 1000; direction: alternate">
        </a-plane>

        <!-- Floor -->
        <a-plane 
            id="floor"
            geometry="primitive: plane; width: 10; height: 10"
            position="0 0 0"
            rotation="-90 0 0"
            material="color: #16213e; metalness: 0.1; roughness: 0.9"
            class="interactive">
        </a-plane>

        <!-- Decorative Elements -->
        <!-- Floating Cubes -->
        <a-box 
            id="cube1"
            position="2 3 -2"
            rotation="45 45 45"
            scale="0.5 0.5 0.5"
            mixin="neon-glow"
            class="interactive"
            animation="property: rotation; to: 405 405 405; loop: true; dur: 10000"
            animation__click="property: scale; to: 1 1 1; startEvents: click; dur: 500; direction: alternate">
        </a-box>

        <a-box 
            id="cube2"
            position="-2 3 2"
            rotation="0 45 0"
            scale="0.3 0.3 0.3"
            material="color: #ff00ff; emissive: #440044; emissiveIntensity: 0.3"
            class="interactive"
            animation="property: rotation; to: 360 405 360; loop: true; dur: 8000"
            animation__click="property: material.color; to: #00ff00; startEvents: click; dur: 500; direction: alternate">
        </a-box>

        <!-- Floating Sphere -->
        <a-sphere 
            id="orb"
            position="0 7 0"
            radius="0.3"
            material="color: #00ffff; emissive: #004444; emissiveIntensity: 0.5; metalness: 0.8; roughness: 0.2"
            class="interactive"
            animation="property: position; to: 0 8 0; loop: true; dur: 3000; direction: alternate; easing: easeInOutSine"
            animation__click="property: radius; to: 0.6; startEvents: click; dur: 300; direction: alternate">
        </a-sphere>

        <!-- Tetris-style Blocks (decorative) -->
        <a-box 
            id="tetris-block-1"
            position="3 1.5 -3"
            scale="0.5 0.5 0.5"
            material="color: #00ffff; emissive: #004444; emissiveIntensity: 0.2"
            class="interactive"
            animation__click="property: rotation; to: 0 360 0; startEvents: click; dur: 1000">
        </a-box>

        <a-box 
            id="tetris-block-2"
            position="3.5 1.5 -3"
            scale="0.5 0.5 0.5"
            material="color: #00ffff; emissive: #004444; emissiveIntensity: 0.2"
            class="interactive"
            animation__click="property: rotation; to: 0 360 0; startEvents: click; dur: 1000">
        </a-box>

        <a-box 
            id="tetris-block-3"
            position="4 1.5 -3"
            scale="0.5 0.5 0.5"
            material="color: #00ffff; emissive: #004444; emissiveIntensity: 0.2"
            class="interactive"
            animation__click="property: rotation; to: 0 360 0; startEvents: click; dur: 1000">
        </a-box>

        <a-box 
            id="tetris-block-4"
            position="4.5 1.5 -3"
            scale="0.5 0.5 0.5"
            material="color: #00ffff; emissive: #004444; emissiveIntensity: 0.2"
            class="interactive"
            animation__click="property: rotation; to: 0 360 0; startEvents: click; dur: 1000">
        </a-box>

        <!-- Camera with Controls -->
        <a-entity 
            id="player"
            position="0 1.6 3"
            movement-controls="fly: false; constrainToNavMesh: false">
            
            <!-- Desktop Camera -->
            <a-camera 
                look-controls="pointerLockEnabled: true"
                wasd-controls="acceleration: 20"
                position="0 0 0">
                
                <!-- Cursor for desktop interaction -->
                <a-cursor 
                    id="cursor"
                    geometry="primitive: ring; radiusInner: 0.005; radiusOuter: 0.01"
                    material="color: #00ff00; opacity: 0.8"
                    animation__click="property: scale; startEvents: click; from: 1 1 1; to: 0.5 0.5 0.5; dur: 150"
                    animation__fusing="property: material.color; startEvents: fusing; from: #00ff00; to: #ff0000; dur: 1500"
                    animation__mouseleave="property: material.color; startEvents: mouseleave; to: #00ff00; dur: 150"
                    raycaster="objects: .interactive; far: 20">
                </a-cursor>
            </a-camera>

            <!-- VR Controllers -->
            <a-entity 
                id="leftHand" 
                hand-controls="hand: left; handModelStyle: lowPoly; color: #00ff00"
                laser-controls="hand: left"
                raycaster="objects: .interactive; far: 20; lineColor: #00ff00; lineOpacity: 0.5">
            </a-entity>
            
            <a-entity 
                id="rightHand" 
                hand-controls="hand: right; handModelStyle: lowPoly; color: #00ff00"
                laser-controls="hand: right"
                raycaster="objects: .interactive; far: 20; lineColor: #00ff00; lineOpacity: 0.5">
            </a-entity>
        </a-entity>

        <!-- Background Music Toggle -->
        <a-sound 
            id="ambient-sound"
            src="url(data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmAZAjiEy+nWjT4LIIzS9t2QQAoUXrTp66hVFApGn+DyvmAZAjiEy+nWjT4L)"
            autoplay="false"
            loop="true"
            volume="0.3"
            position="0 5 0">
        </a-sound>
    </a-scene>

    <script>
        // Scene interaction logic
        document.addEventListener('DOMContentLoaded', function() {
            const scene = document.querySelector('a-scene');
            
            // Wait for scene to load
            scene.addEventListener('loaded', function() {
                console.log('VR Cube Room loaded successfully!');
                
                // Add click sound to all interactive elements
                const interactiveElements = document.querySelectorAll('.interactive');
                interactiveElements.forEach(element => {
                    element.addEventListener('click', function() {
                        // Create click sound effect
                        const clickSound = new Audio('data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmAZAjiEy+nWjT4L');
                        clickSound.volume = 0.2;
                        clickSound.play().catch(e => console.log('Audio play prevented'));
                    });
                });

                // Front wall special interaction (future Tetris integration point)
                const frontWall = document.getElementById('front-wall');
                frontWall.addEventListener('click', function() {
                    console.log('Front wall clicked - ready for Tetris integration!');
                    
                    // Visual feedback for the integration point
                    frontWall.setAttribute('animation__flash', {
                        property: 'material.emissiveIntensity',
                        to: 0.5,
                        dur: 200,
                        direction: 'alternate',
                        repeat: 3
                    });
                });

                // Music toggle functionality
                let musicPlaying = false;
                const ambientSound = document.getElementById('ambient-sound');
                
                document.addEventListener('keydown', function(event) {
                    if (event.key === 'm' || event.key === 'M') {
                        if (musicPlaying) {
                            ambientSound.components.sound.pauseSound();
                            musicPlaying = false;
                            console.log('Music paused');
                        } else {
                            ambientSound.components.sound.playSound();
                            musicPlaying = true;
                            console.log('Music playing');
                        }
                    }
                });
            });

            // VR enter/exit detection
            scene.addEventListener('enter-vr', function() {
                console.log('Entered VR mode!');
                document.querySelector('.ui-overlay').style.display = 'none';
            });

            scene.addEventListener('exit-vr', function() {
                console.log('Exited VR mode!');
                document.querySelector('.ui-overlay').style.display = 'block';
            });
        });
    </script>
</body>
</html>
