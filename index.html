<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Quest AR Baseline Minimal Example</title>
  <!-- A-Frame v1.7.0, official CDN: https://aframe.io/docs/1.7.0/ -->
  <script src="https://aframe.io/releases/1.7.0/aframe.min.js"></script>
  <style>
    #hud {
      position: fixed;
      top: 12px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(20,20,30,0.75);
      color: #fff;
      padding: 5px 16px;
      border-radius: 13px;
      font-size: 1rem;
      z-index: 10001;
      pointer-events: none;
      font-family: system-ui, sans-serif;
      box-shadow: 0 2px 12px rgba(0,0,0,0.1);
      opacity: 0.97;
    }
  </style>
</head>
<body>
  <div id="hud">A-button or Trigger ‚ü∂ change cube colour</div>
  <a-scene
    webxr="requiredFeatures: local-floor,immersive-ar; optionalFeatures: dom-overlay; overlayElement: #hud"
    renderer="alpha: true; antialias: true"
    vr-mode-ui="enabled: false"
    xr-mode-ui>
    <!-- Transparent sky so passthrough background is visible. See https://aframe.io/docs/1.7.0/primitives/a-sky.html -->
    <a-sky color="#000" opacity="0"></a-sky>
    <!-- Controller entities -->
    <a-entity id="leftHand" meta-touch-controls="hand: left"></a-entity>
    <a-entity id="rightHand" meta-touch-controls="hand: right"></a-entity>
    <!-- Interactive floating cube -->
    <a-box id="cube"
      position="0 1.5 -1"
      depth="0.2" height="0.2" width="0.2"
      color="steelblue"
      class="clickable"
      raycaster-target></a-box>
    <a-camera position="0 1.6 0"></a-camera>
  </a-scene>
  <script>
    // See https://aframe.io/docs/1.7.0/components/meta-touch-controls.html for controller API
    // See https://www.w3.org/TR/webxr-ar-module-1/ for AR session spec
    const cube = document.getElementById('cube');
    const left = document.getElementById('leftHand');
    const right = document.getElementById('rightHand');
    function randomColor() {
      return `hsl(${Math.floor(Math.random()*360)},70%,55%)`;
    }
    function tryColorChange(evt) {
      const raycaster = this.components.raycaster;
      if (!raycaster) return;
      const intersection = raycaster.getIntersection(cube);
      if (intersection) {
        cube.setAttribute('color', randomColor());
      }
    }
    // Attach raycasters to controller entities for direct intersection
    left.setAttribute('raycaster', 'objects: .clickable; showLine: true; far: 10');
    right.setAttribute('raycaster', 'objects: .clickable; showLine: true; far: 10');
    left.setAttribute('cursor', 'fuse: false');
    right.setAttribute('cursor', 'fuse: false');
    left.addEventListener('triggerdown', tryColorChange);
    right.addEventListener('triggerdown', tryColorChange);
    left.addEventListener('abuttondown', tryColorChange);
    right.addEventListener('abuttondown', tryColorChange);
  </script>
</body>
</html>
