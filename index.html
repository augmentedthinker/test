<!DOCTYPE html>
<html>
  <head>
    <title>Simple AR Cube</title>
    <style>
      body { margin: 0; overflow: hidden; }
      canvas { display: block; }
      #arButton {
        position: absolute;
        bottom: 30px;
        left: 50%;
        transform: translateX(-50%);
        padding: 20px 40px;
        font-size: 24px;
        background-color: #000080; /* Dark blue */
        color: white;
        border: 2px solid #000050;
        border-radius: 10px;
        font-weight: bold;
        cursor: pointer;
        z-index: 1000;
        transition: all 0.2s ease-in-out;
      }
      #arButton:hover {
        background-color: #FF0000; /* Fiery red on hover */
        box-shadow: 0 0 20px rgba(255, 0, 0, 0.9);
        transform: translateX(-50%) scale(1.03);
      }
      #arButton:active {
        background-color: #CC0000; /* Darker red when pressed */
        transform: translateX(-50%) scale(0.98);
        box-shadow: 0 0 10px rgba(255, 0, 0, 0.9);
      }
    </style>
  </head>
  <body>
    <script type="module">
      import * as THREE from 'https://unpkg.com/three@0.155.0/build/three.module.js';
      import { ARButton } from 'https://unpkg.com/three@0.155.0/examples/jsm/webxr/ARButton.js';

      let camera, scene, renderer;
      let cube;

      init();

      function init() {
        // 1. Setup Scene, Camera, Renderer
        scene = new THREE.Scene();
        camera = new THREE.PerspectiveCamera(70, window.innerWidth / window.innerHeight, 0.01, 20);

        renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
        renderer.setPixelRatio(window.devicePixelRatio);
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.xr.enabled = true; // Enable WebXR for the renderer
        document.body.appendChild(renderer.domElement);

        // 2. Add Ambient Light
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
        scene.add(ambientLight);

        // 3. Add a Cube
        const geometry = new THREE.BoxGeometry(0.5, 0.5, 0.5); // 0.5 units side length
        const material = new THREE.MeshNormalMaterial(); // Simple material to see rotation
        cube = new THREE.Mesh(geometry, material);
        cube.position.set(0, 1.0, -2); // Position the cube 1 meter high, 2 meters in front
        scene.add(cube);

        // 4. Create AR Button
        const arButton = ARButton.createButton(renderer, { requiredFeatures: ['local-floor'] });
        arButton.id = 'arButton'; // Assign an ID for styling
        arButton.textContent = 'ENTER AR'; // Custom button text
        document.body.appendChild(arButton);

        // 5. Set Animation Loop
        renderer.setAnimationLoop(render);

        // 6. Handle Window Resizing
        window.addEventListener('resize', onWindowResize);
      }

      function onWindowResize() {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
      }

      function render() {
        // Rotate the cube
        cube.rotation.x += 0.01;
        cube.rotation.y += 0.01;

        renderer.render(scene, camera);
      }
    </script>
  </body>
</html>
