<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>VR Castle Experience</title>
    <meta name="description" content="Immersive VR Castle Scene">
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-environment-component@1.3.2/dist/aframe-environment-component.min.js"></script>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background: linear-gradient(to bottom, #1a2980, #26d0ce);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        #ui {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            padding: 20px;
            text-align: center;
            color: white;
            background: rgba(0, 0, 0, 0.5);
            z-index: 100;
            pointer-events: none;
        }
        #title {
            font-size: 2.5rem;
            margin: 0;
            text-shadow: 0 0 10px rgba(0, 0, 0, 0.7);
        }
        #subtitle {
            font-size: 1.2rem;
            margin-top: 5px;
            opacity: 0.8;
        }
        #instructions {
            position: fixed;
            bottom: 20px;
            left: 0;
            width: 100%;
            text-align: center;
            color: white;
            background: rgba(0, 0, 0, 0.5);
            padding: 10px;
            font-size: 1rem;
            z-index: 100;
        }
        .highlight {
            color: #ffcc00;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div id="ui">
        <h1 id="title">Medieval Castle VR</h1>
        <p id="subtitle">Explore the fortress in virtual reality</p>
    </div>
    
    <div id="instructions">
        Look around: Move your head/device | Enter VR: Click VR icon
    </div>

    <a-scene environment="preset: forest; dressingAmount: 500" fog="type: exponential; color: #bc7644; density: 0.02">
        <!-- Camera with WASD controls for desktop -->
        <a-entity id="cameraRig" position="0 1.6 0">
            <a-entity id="head" camera look-controls position="0 0 0"></a-entity>
            <a-entity laser-controls="hand: left"></a-entity>
            <a-entity laser-controls="hand: right"></a-entity>
        </a-entity>

        <!-- Ground -->
        <a-plane position="0 -0.5 0" rotation="-90 0 0" width="100" height="100" 
                 color="#7d5d3b" shadow></a-plane>

        <!-- Castle Base -->
        <a-box position="0 0 0" width="30" height="5" depth="30" color="#8B4513" shadow></a-box>
        
        <!-- Main Tower -->
        <a-cylinder position="0 5 0" radius="8" height="15" color="#A0522D" shadow></a-cylinder>
        
        <!-- Tower Details -->
        <a-cylinder position="0 12.5 0" radius="9" height="1" color="#8B0000" shadow></a-cylinder>
        <a-cone position="0 14 0" radius-top="0" radius-bottom="3" height="4" color="#8B0000" shadow></a-cone>
        
        <!-- Flag on Main Tower -->
        <a-box position="0 16 0" width="0.2" height="3" depth="0.2" color="#555" shadow></a-box>
        <a-plane position="0 17 0" rotation="0 0 -90" width="4" height="2.5" color="#FF0000" shadow>
            <a-animation attribute="rotation" from="0 0 -90" to="0 360 -90" dur="20000" repeat="indefinite"></a-animation>
        </a-plane>
        
        <!-- Castle Walls -->
        <a-box position="-15 2.5 0" width="1" height="5" depth="30" color="#8B4513" shadow></a-box>
        <a-box position="15 2.5 0" width="1" height="5" depth="30" color="#8B4513" shadow></a-box>
        <a-box position="0 2.5 -15" width="30" height="5" depth="1" color="#8B4513" shadow></a-box>
        <a-box position="0 2.5 15" width="30" height="5" depth="1" color="#8B4513" shadow></a-box>
        
        <!-- Wall Towers -->
        <a-cylinder position="-15 5 -15" radius="3" height="10" color="#A0522D" shadow></a-cylinder>
        <a-cylinder position="15 5 -15" radius="3" height="10" color="#A0522D" shadow></a-cylinder>
        <a-cylinder position="-15 5 15" radius="3" height="10" color="#A0522D" shadow></a-cylinder>
        <a-cylinder position="15 5 15" radius="3" height="10" color="#A0522D" shadow></a-cylinder>
        
        <!-- Tower Tops -->
        <a-cylinder position="-15 10 -15" radius="3.5" height="1" color="#8B0000" shadow></a-cylinder>
        <a-cylinder position="15 10 -15" radius="3.5" height="1" color="#8B0000" shadow></a-cylinder>
        <a-cylinder position="-15 10 15" radius="3.5" height="1" color="#8B0000" shadow></a-cylinder>
        <a-cylinder position="15 10 15" radius="3.5" height="1" color="#8B0000" shadow></a-cylinder>
        
        <!-- Drawbridge -->
        <a-box position="0 0 16" width="8" height="0.5" depth="2" color="#8B4513" shadow></a-box>
        <a-box position="0 -0.5 18" width="8" height="0.5" depth="2" color="#654321" shadow></a-box>
        
        <!-- Gate -->
        <a-box position="0 2.5 15.5" width="6" height="5" depth="1" color="#5D4037" shadow></a-box>
        <a-box position="0 5 15.5" width="2" height="0.5" depth="1" color="#FFD700" shadow></a-box>
        
        <!-- Portcullis -->
        <a-entity position="0 5 15.6">
            <a-box position="0 0 0" width="6" height="0.2" depth="0.2" color="#777" shadow></a-box>
            <a-box position="-2.5 -1 0" width="0.2" height="2" depth="0.2" color="#777" shadow></a-box>
            <a-box position="-1.5 -1 0" width="0.2" height="2" depth="0.2" color="#777" shadow></a-box>
            <a-box position="-0.5 -1 0" width="0.2" height="2" depth="0.2" color="#777" shadow></a-box>
            <a-box position="0.5 -1 0" width="0.2" height="2" depth="0.2" color="#777" shadow></a-box>
            <a-box position="1.5 -1 0" width="0.2" height="2" depth="0.2" color="#777" shadow></a-box>
            <a-box position="2.5 -1 0" width="0.2" height="2" depth="0.2" color="#777" shadow></a-box>
        </a-entity>
        
        <!-- Moat -->
        <a-box position="0 -2 0" width="40" height="3" depth="40" color="#1E90FF" shadow></a-box>
        
        <!-- Trees around the castle -->
        <a-entity position="-25 0 -25">
            <a-cylinder radius="0.5" height="8" color="#8B4513" position="0 4 0"></a-cylinder>
            <a-cone radius-top="0" radius-bottom="4" height="6" color="#228B22" position="0 10 0"></a-cone>
        </a-entity>
        <a-entity position="25 0 -25">
            <a-cylinder radius="0.5" height="8" color="#8B4513" position="0 4 0"></a-cylinder>
            <a-cone radius-top="0" radius-bottom="4" height="6" color="#228B22" position="0 10 0"></a-cone>
        </a-entity>
        <a-entity position="-25 0 25">
            <a-cylinder radius="0.5" height="8" color="#8B4513" position="0 4 0"></a-cylinder>
            <a-cone radius-top="0" radius-bottom="4" height="6" color="#228B22" position="0 10 0"></a-cone>
        </a-entity>
        <a-entity position="25 0 25">
            <a-cylinder radius="0.5" height="8" color="#8B4513" position="0 4 0"></a-cylinder>
            <a-cone radius-top="0" radius-bottom="4" height="6" color="#228B22" position="0 10 0"></a-cone>
        </a-entity>
        
        <!-- Knights -->
        <a-entity position="-5 0 10" rotation="0 90 0">
            <a-cylinder radius="0.5" height="2" color="#4169E1" position="0 1 0"></a-cylinder>
            <a-sphere radius="0.6" color="#FFD700" position="0 2.5 0"></a-sphere>
            <a-box width="0.2" height="1.5" depth="0.2" color="#C0C0C0" position="0.7 1 0" rotation="0 0 20"></a-box>
            <a-box width="0.2" height="1.5" depth="0.2" color="#C0C0C0" position="-0.7 1 0" rotation="0 0 -20"></a-box>
        </a-entity>
        
        <a-entity position="5 0 10" rotation="0 -90 0">
            <a-cylinder radius="0.5" height="2" color="#DC143C" position="0 1 0"></a-cylinder>
            <a-sphere radius="0.6" color="#FFD700" position="0 2.5 0"></a-sphere>
            <a-box width="0.2" height="1.5" depth="0.2" color="#C0C0C0" position="0.7 1 0" rotation="0 0 20"></a-box>
            <a-box width="0.2" height="1.5" depth="0.2" color="#C0C0C0" position="-0.7 1 0" rotation="0 0 -20"></a-box>
        </a-entity>
        
        <!-- Banners -->
        <a-plane position="-14 7 0" rotation="0 90 0" width="6" height="4" color="#FF0000" shadow></a-plane>
        <a-plane position="14 7 0" rotation="0 -90 0" width="6" height="4" color="#0000FF" shadow></a-plane>
        
        <!-- Ambient light -->
        <a-entity light="type: ambient; color: #BBB; intensity: 0.5"></a-entity>
        
        <!-- Directional light (sun) -->
        <a-entity light="type: directional; color: #FFF; intensity: 0.8" position="-10 20 10"></a-entity>
        
        <!-- Point light inside castle -->
        <a-entity light="type: point; color: #FFA500; intensity: 0.5" position="0 8 0"></a-entity>
    </a-scene>

    <script>
        // Add some interactive elements
        document.addEventListener('DOMContentLoaded', function() {
            const scene = document.querySelector('a-scene');
            
            // Add click event to portcullis
            const portcullis = document.querySelector('[position="0 5 15.6"]');
            if (portcullis) {
                portcullis.setAttribute('animation', {
                    property: 'position',
                    to: '0 2 15.6',
                    dur: 3000,
                    easing: 'easeInOutQuad'
                });
                
                setTimeout(() => {
                    portcullis.setAttribute('animation__return', {
                        property: 'position',
                        to: '0 5 15.6',
                        dur: 3000,
                        easing: 'easeInOutQuad',
                        delay: 5000
                    });
                }, 3000);
            }
            
            // Add floating animation to flags
            const flags = document.querySelectorAll('a-plane[color="#FF0000"]');
            flags.forEach(flag => {
                flag.setAttribute('animation', {
                    property: 'rotation',
                    from: '0 0 -90',
                    to: '0 360 -90',
                    dur: 20000,
                    loop: true,
                    easing: 'linear'
                });
            });
        });
    </script>
</body>
</html>
