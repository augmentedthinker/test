<!--
  Quest VR Scene: Long colored lasers, clickable sphere
  Docs: https://aframe.io/docs/1.7.0/components/laser-controls.html
-->
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Quest VR Scene: Colorful Lasers & Clickable Sphere</title>
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
  <script src="https://unpkg.com/aframe-extras@7.0.0/dist/aframe-extras.min.js"></script>
</head>
<body>
<a-scene background="color: #ECECEC">
  <a-assets></a-assets>

  <a-entity id="cameraRig" position="0 1.6 0" movement-controls>
    <a-entity camera look-controls wasd-controls position="0 0 0"></a-entity>

    <!-- Left Hand: Blue laser, extended -->
    <a-entity id="leftHand"
              meta-touch-controls="hand: left; model: true"
              laser-controls="hand: left"
              raycaster="objects: .clickable; far: 100"
              line="color: blue; opacity: 0.9"></a-entity>

    <!-- Right Hand: Red laser, extended -->
    <a-entity id="rightHand"
              meta-touch-controls="hand: right; model: true"
              laser-controls="hand: right"
              raycaster="objects: .clickable; far: 100"
              line="color: red; opacity: 0.9"></a-entity>
  </a-entity>

  <!-- Light blue sky -->
  <a-sky color="#B3E0FF"></a-sky>
  <a-plane id="ground" color="#7BC8A4" rotation="-90 0 0" width="20" height="20"></a-plane>
  <a-entity light="type: ambient; color: #FFF; intensity: 0.8"></a-entity>
  <a-entity light="type: directional; color: #FFF; intensity: 0.6" position="1 3 2"></a-entity>

  <!-- Clickable sphere floating in center -->
  <a-sphere id="colorSphere"
            class="clickable"
            position="0 2 0"
            radius="0.4"
            color="#FFC300"
            shadow="cast: true"></a-sphere>

  <!-- Script for color change on click -->
  <script>
    AFRAME.registerComponent('toggle-color-on-click', {
      schema: {
        colors: {type: 'array', default: ['#FFC300', '#32CD32', '#1976D2', '#E53935']}
      },
      init: function () {
        this.colorIndex = 0;
        this.el.addEventListener('click', () => {
          this.colorIndex = (this.colorIndex + 1) % this.data.colors.length;
          this.el.setAttribute('color', this.data.colors[this.colorIndex]);
        });
      }
    });

    // Attach to the sphere once A-Frame is loaded
    AFRAME.registerComponent('attach-toggle', {
      init: function () {
        document.querySelector('#colorSphere').setAttribute('toggle-color-on-click', '');
      }
    });
    // This ensures the toggle is attached after the scene is loaded
    document.addEventListener('DOMContentLoaded', function () {
      document.querySelector('a-scene').setAttribute('attach-toggle', '');
    });
  </script>
</a-scene>
</body>
</html>
<!--
References:
- https://aframe.io/docs/1.7.0/components/laser-controls.html
- https://aframe.io/docs/1.7.0/components/raycaster.html
- https://aframe.io/docs/1.7.0/primitives/a-sphere.html
-->
